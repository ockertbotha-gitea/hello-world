<!DOCTYPE html>
<html>

<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <link rel="stylesheet" type="text/css" href="./styles/style.css">
  <title>Hello World</title>
</head>

<body>
<div class="stars"></div>
<div class="planets"></div>
<div class="twinkling"></div>
<div class="clouds"></div>

<h1>Hello W<span id="WorldTitle"></span>rld</h1>

    <ul>
      <li>
        <button
          id="MoonButton"
          onclick = "printHelloDistance('Moon', 238900)">
          <span id="MoonMessage" class="message"> </span>
          </br>
          <span id="MoonMeter" class="meter"> </span>
        </button>
      </li>
      <li>
          <button
            id="MarsButton"
            onclick="printHelloDistance('Mars', 140000000)">
            <span id="MarsMessage" class="message"> </span>
            </br>
            <span id="MarsMeter" class="meter"> </span>
          </button>
      </li>

      <li>
          <button
            id="SaturnButton"
            onclick="printHelloDistance('Saturn', 1200000000)">
            <span id="SaturnMessage" class="message"> </span>
            </br>
            <span id="SaturnMeter" class="meter"> </span>
          </button>
      </li>
    </ul>

  <script>

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function printHelloDistance(elementId, distance) {
      var messageElementId = elementId + "Message";
      var meterElementId = elementId + "Meter";
      var time = 30;
      var markerDistance = (398000 * 2);
      var unit = "miles";

      var beamSpan = "<span id=\"Beam\"></span>"
      var distanceMarker = "- ";
      var beamDistance = "";
      var worldHelloSpan = "<span id=\"WorldHello\"></span>"

      var distanceMarkers = distance / markerDistance;
      var displayDistance =
        distance.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      var number4Print = [...displayDistance];

      //Print Meter
      for (i = 0; i < distanceMarkers; i++) {
        await sleep(time);
        beamDistance += distanceMarker;
        document.getElementById(meterElementId).innerHTML
          = beamDistance + beamSpan;
      }

      document.getElementById(meterElementId).innerHTML
        = beamDistance + worldHelloSpan;

      //Print Message
      var numberProgress = "";
      var endNumber = number4Print.length - 1;
      for (i = 0; i <= endNumber; i++) {
        await sleep(time*3);
        numberProgress += ""+ number4Print[i];
        document.getElementById(messageElementId).innerHTML
          = numberProgress;
      }

      document.getElementById(messageElementId).innerHTML += " ";
      var unit4Print = [...unit];
      for(i = 0; i < unit.length; i++) {
        await sleep(time);
        document.getElementById(messageElementId).innerHTML += unit4Print[i];
      }
    }

  </script>
</body>

</html>
